<launch>

    <!-- Set sim time if not using camera -->
    <param name="/use_sim_time" value="true"/>

    <!--IMU Filter Madgwick
    <node pkg="imu_filter_madgwick" type="imu_filter_node" name="ImuFilter">
        <param name="use_mag" value="true" />
        <param name="publish_tf" type="bool" value="false" />
        <param name="world_frame" type="string" value="enu" />
        <remap from="/imu/data_raw" to="/imu/data" />
    </node>-->


    <!-- MARS ROS to fuse GPS with IMU-->
    <include file="$(find mars_ros)/launch/mars_gps_mag.launch">
        <!-- Input -->
        <arg name="imu_in_topic" default="/imu/data" />
        <arg name="mag1_in" default="/imu/mag" />
        <arg name="gps1_coord_in" default="/mimix3/gps/assisted" />

      <param name="world_frame" value="odom"/>

        <!-- Output Core State -->
        <arg name="full_state_out_topic" default="~full_state_out" />
        <arg name="full_state_lite_out_topic" default="~full_state_lite_out" />
        <arg name="odom_state_out_topic" default="~odom_state_out" />
        <arg name="pose_state_out_topic" default="~pose_state_out" />

        <!-- Output Calibration State -->
        <arg name="gps1_cal_state_out_topic" default="~gps1_cal_state_out" />
        <arg name="mag1_cal_state_out_topic" default="~mag1_cal_state_out" />

        <!-- Config File -->
        <arg name="config_file" default="$(find fruc_dataset_apparatus_slam)/launch/config/gps_mag_config.yaml" />

        <!-- Node Options -->
        <arg name="respawn" default="false" />

    </include>


</launch>